var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",b=r=>{let t=typeof Uint8Array>"u"?[]:new Uint8Array(256),o=l.length;for(let e=0;e<o;e++)t[r.charCodeAt(e)]=e;return t},m=b(l),p=b(y),w=/^[-A-Za-z0-9\-_]*$/,B=/^[-A-Za-z0-9+/]*={0,3}$/;function h(r,t){let o=r.length,e=r.length*.75,n,f=0,s,i,a,g;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);let A=new ArrayBuffer(e),u=new Uint8Array(A),c=t?p:m;for(n=0;n<o;n+=4)s=c[r.charCodeAt(n)],i=c[r.charCodeAt(n+1)],a=c[r.charCodeAt(n+2)],g=c[r.charCodeAt(n+3)],u[f++]=s<<2|i>>4,u[f++]=(i&15)<<4|a>>2,u[f++]=(a&3)<<6|g&63;return A}function U(r,t){let o=new Uint8Array(r),e,n="",f=o.length,s=t?y:l;for(e=0;e<f;e+=3)n+=s[o[e]>>2],n+=s[(o[e]&3)<<4|o[e+1]>>4],n+=s[(o[e+1]&15)<<2|o[e+2]>>6],n+=s[o[e+2]&63];let i=f%3;return i===2?n=n.substring(0,n.length-1)+(t?"":"="):i===1&&(n=n.substring(0,n.length-2)+(t?"":"==")),n}function d(r,t){return new TextDecoder().decode(h(r,t))}function k(r,t){return U(new TextEncoder().encode(r),t)}function C(r,t){if(!(typeof r=="string"||r instanceof String))return!1;try{return t?w.test(r):B.test(r)}catch{return!1}}var S={toString:d,fromString:k,toArrayBuffer:h,fromArrayBuffer:U,validate:C};export{S as base64,U as fromArrayBuffer,k as fromString,h as toArrayBuffer,d as toString,C as validate};
